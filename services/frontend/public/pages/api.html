<div class="animate-slide-up w-full space-y-8">
  <div class="space-y-4">
    <h1 class="font-orbitron text-3xl font-bold">WebSocket Game API</h1>
    <p>This page describes the WebSocket API to interact with the Pong game server.</p>
  </div>

  <div class="space-y-4">
    <h2 class="font-orbitron text-xl font-bold">Connection</h2>

    <ul class="list-inside list-disc">
      <li><b>URL:</b> <code>ws(s)://&lt;host&gt;/api/game/ws</code></li>
      <li><b>Authentication:</b> JWT in httpOnly cookie (same as the frontend)</li>
    </ul>
  </div>

  <div class="space-y-4">
    <h2 class="font-orbitron text-xl font-bold">Client → Server Messages</h2>

    <ul class="space-y-4">
      <li class="space-y-2">
        <p><b class="font-orbitron">join_normal</b>: join the normal queue</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">{ "type": "join_normal" }</pre>
      </li>
      <li class="space-y-2">
        <p><b class="font-orbitron">join_tournament</b>: join the tournament queue</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">{ "type": "join_tournament" }</pre>
      </li>
      <li class="space-y-2">
        <p><b class="font-orbitron">leave_queue</b>: leave the queue</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">{ "type": "leave_queue" }</pre>
      </li>
      <li class="space-y-2">
        <p><b class="font-orbitron">input</b>: send a paddle action</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{ "type": "input", "key": "up"|"down", "action": "press"|"release" }</pre
        >
      </li>
      <li class="space-y-2">
        <p><b class="font-orbitron">ping</b>: ping the server</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">{ "type": "ping" }</pre>
      </li>
    </ul>
  </div>

  <div class="space-y-4">
    <h2 class="font-orbitron text-xl font-bold">Server → Client Messages</h2>

    <div class="space-y-2">
      <p>Possible message types:</p>
      <pre class="bg-surface rounded px-2 py-1 text-sm whitespace-normal">
        queue_joined, queue_left, game_found, countdown, game_start, game_state, ball_sync, paddle_update, score_update, game_over, tournament_waiting, tournament_result, opponent_disconnected, opponent_reconnected, error, pong    </pre
      >
    </div>

    <p>
      Below are the main server→client message types and their payload structures. All information needed to implement a
      client is included here.
    </p>

    <ul class="space-y-4">
      <li class="space-y-2">
        <p><b class="font-orbitron">queue_joined</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "queue_joined",
  "position": number, // your position in the queue
  "mode": "normal" | "tournament"
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">queue_left</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "queue_left"
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">game_found</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "game_found",
  "gameId": string,
  "side": "left" | "right",
  "opponentName": string,
  "mode": "normal" | "tournament"
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">countdown</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "countdown",
  "seconds": number
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">game_state</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "game_state",
  "state": {
    "gameId": string,
    "state": "waiting" | "playing" | "paused" | "over",
    "ball": {
      "position": { "x": number, "y": number },
      "velocity": { "x": number, "y": number },
      "timestamp": number
    },
    "paddles": {
      "left": { "y": number, "direction": -1 | 0 | 1 },
      "right": { "y": number, "direction": -1 | 0 | 1 }
    },
    "score": { "left": number, "right": number },
    "timestamp": number
  }
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">game_over</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "game_over",
  "finalScore": { "left": number, "right": number },
  "mode": "normal" | "tournament",
  "leftPrecision": number, // 0..1
  "rightPrecision": number // 0..1
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">error</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "error",
  "message": string
}</pre
        >
      </li>

      <li class="space-y-2">
        <p><b class="font-orbitron">pong</b>:</p>
        <pre class="bg-surface rounded px-2 py-1 text-sm">
{
  "type": "pong"
}</pre
        >
      </li>
    </ul>
  </div>

  <div class="space-y-4">
    <h2 class="font-orbitron text-xl font-bold">Example Sequence</h2>

    <ol class="list-inside list-decimal">
      <li>Connect to the WebSocket</li>
      <li>Send <code>{ "type": "join_normal" }</code></li>
      <li>Receive <code>queue_joined</code>, then <code>game_found</code>, then <code>countdown</code>, etc.</li>
      <li>During the game, send <code>{ "type": "input", ... }</code> to move the paddle</li>
    </ol>

    <h2 class="font-orbitron text-xl font-bold">Notes</h2>
    <ul class="list-inside list-disc">
      <li>All commands are JSON.</li>
      <li>See the source code for more details.</li>
    </ul>
  </div>
</div>
