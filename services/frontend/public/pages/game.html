<script src="/public/pages/game.js" defer></script>

<div class="flex flex-1 flex-col items-center justify-center gap-6">
  <!-- Queue / Status -->
  <div id="game-status" class="font-orbitron text-center text-2xl font-bold">
    <p id="status-text">Connecting...</p>
    <p id="queue-position" class="text-lg text-gray-400 hidden">Position: <span id="position-number">-</span></p>
  </div>

  <!-- Game container -->
  <div id="game-container" class="relative hidden">
    <!-- Score display -->
    <div id="score-display" class="font-orbitron mb-4 flex justify-center gap-16 text-4xl font-bold">
      <span id="score-left" class="text-cyan-400">0</span>
      <span class="text-gray-500">-</span>
      <span id="score-right" class="text-fuchsia-400">0</span>
    </div>

    <!-- Canvas container with countdown overlay -->
    <div class="relative">
      <canvas
        id="game-canvas"
        width="800"
        height="600"
        class="rounded-lg border-2 border-white/20 bg-gray-900"
      ></canvas>
      
      <!-- Countdown overlay positioned over canvas (above ball) -->
      <div id="countdown-overlay" class="font-orbitron absolute inset-0 flex items-start justify-center pt-32 text-9xl font-bold text-white pointer-events-none hidden">
        <span id="countdown-number">3</span>
      </div>
    </div>

    <!-- Player names -->
    <div class="mt-4 flex justify-between px-4 text-lg">
      <div class="flex items-center gap-2">
        <span id="player-left" class="text-cyan-400">Player 1</span>
        <span id="disconnect-left" class="text-xs text-yellow-500 opacity-70 hidden">(disconnected)</span>
      </div>
      <div class="flex items-center gap-2">
        <span id="player-right" class="text-fuchsia-400">Player 2</span>
        <span id="disconnect-right" class="text-xs text-yellow-500 opacity-70 hidden">(disconnected)</span>
      </div>
    </div>
  </div>

  <!-- Disconnect overlay -->
  <div id="disconnect-overlay" class="absolute inset-0 flex items-center justify-center bg-black/40 hidden">
    <div class="flex flex-col items-center gap-2 bg-gray-900/80 px-8 py-6 rounded-lg border border-red-500/50 backdrop-blur-sm">
      <p class="font-orbitron text-xl font-bold text-red-400">Disconnected</p>
      <p class="text-sm text-gray-400">Trying to reconnect...</p>
    </div>
  </div>

  <!-- Game Over overlay -->
<div id="game-over-overlay" class="hidden absolute">
  <div class="flex flex-col items-center gap-6">
    <h2 class="font-orbitron text-5xl font-bold text-white">GAME OVER</h2>
    <p id="winner-text" class="font-orbitron text-2xl text-cyan-400">Winner: Player 1</p>
    <p id="final-score" class="text-xl text-gray-400">11 - 5</p>
    <button id="play-again-btn" class="font-orbitron mt-4 rounded-lg bg-cyan-600 px-8 py-3 text-xl font-bold text-white hover:bg-cyan-500 transition-colors">
      PLAY AGAIN
    </button>
  </div>
</div>
  <!-- Queue buttons container -->
  <div id="queue-buttons" class="hidden flex gap-4">
    <!-- Normal Queue button -->
    <button
      id="join-normal-btn"
      class="font-orbitron cursor-pointer rounded-lg bg-gradient-to-r from-cyan-600 to-cyan-500 px-8 py-4 text-2xl font-bold text-white hover:from-cyan-500 hover:to-cyan-400 transition-all"
    >
      NORMAL
    </button>

    <!-- Tournament Queue button -->
    <button
      id="join-tournament-btn"
      class="font-orbitron cursor-pointer rounded-lg bg-gradient-to-r from-fuchsia-600 to-fuchsia-500 px-8 py-4 text-2xl font-bold text-white hover:from-fuchsia-500 hover:to-fuchsia-400 transition-all"
    >
      TOURNAMENT
    </button>
  </div>

  <!-- Leave queue button -->
  <button
    id="leave-queue-btn"
    class="font-orbitron rounded-lg border-2 border-red-500 px-6 py-2 text-lg font-bold text-red-500 hover:bg-red-500 hover:text-white transition-all hidden"
  >
    LEAVE QUEUE
  </button>

  <!-- Tournament result overlay -->
  <div id="tournament-result-overlay" class="hidden absolute inset-0 flex items-center justify-center bg-black/80">
    <div class="flex flex-col items-center gap-6 bg-gray-900 p-8 rounded-lg border-2 border-fuchsia-500">
      <h2 class="font-orbitron text-4xl font-bold text-fuchsia-400">TOURNAMENT RESULTS</h2>
      <div id="tournament-rankings" class="flex flex-col gap-2 text-xl">
        <!-- Rankings will be inserted here -->
      </div>
      <button id="tournament-done-btn" class="font-orbitron mt-4 rounded-lg bg-fuchsia-600 px-8 py-3 text-xl font-bold text-white hover:bg-fuchsia-500 transition-colors">
        DONE
      </button>
    </div>
  </div>
</div>
