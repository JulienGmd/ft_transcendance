<script src="/public/pages/game.js"></script>

<div class="font-orbitron relative flex flex-1 flex-col items-center justify-center select-none">
  <!-- Menu overlay -->
  <div id="menu-overlay" class="bg-background absolute inset-0 grid place-items-center">
    <div class="animate-slide-up flex flex-col items-center justify-center">
      <p class="text-2xl font-bold">SELECT A GAME MODE:</p>
      <button id="menu-join-local-btn" class="button-tertiary mt-4 text-2xl">LOCAL</button>
      <button id="menu-join-normal-btn" class="button-tertiary text-2xl">NORMAL</button>
      <button id="menu-join-tournament-btn" class="button-tertiary text-2xl">TOURNAMENT</button>
    </div>
  </div>

  <!-- Queue overlay -->
  <div id="queue-overlay" class="bg-background absolute inset-0 grid hidden place-items-center">
    <div class="animate-slide-up flex flex-col items-center justify-center gap-6">
      <p class="text-2xl font-bold">Waiting for players...</p>
      <p class="text-text-muted text-xl font-bold">Position: <span id="queue-position">-</span></p>
      <button id="queue-leave-btn" class="button-tertiary text-2xl">LEAVE QUEUE</button>
    </div>
  </div>

  <!-- Countdown overlay -->
  <div id="countdown-overlay" class="animate-slide-up absolute top-1/2 left-1/2 hidden -translate-1/2">
    <p id="countdown-number" class="text-text/50 text-9xl font-bold">3</p>
  </div>

  <!-- Game Over overlay -->
  <div id="game-over-overlay" class="bg-background absolute inset-0 grid hidden place-items-center">
    <div class="animate-slide-up flex flex-col items-center justify-center gap-6">
      <p class="text-center text-2xl font-bold">GAME OVER</p>
      <p id="game-over-text" class="text-xl">-</p>
      <p id="game-over-score" class="">0 - 0</p>
      <button id="game-over-play-again-btn" class="button-tertiary text-2xl">PLAY AGAIN</button>
    </div>
  </div>

  <!-- Tournament result overlay -->
  <div id="tournament-result-overlay" class="bg-background absolute inset-0 grid hidden place-items-center">
    <div class="animate-slide-up flex w-full flex-col items-center justify-center gap-6">
      <h2 class="text-center text-2xl font-bold">TOURNAMENT RESULTS</h2>
      <svg viewBox="0 0 260 228" class="fill-text-muted max-w-sm text-[10px] font-semibold">
        <text x="0" y="13" font-weight="normal">SEMI 1</text>
        <rect id="semi1-p1-rect" x="0" y="17" width="100" height="24" fill="var(--color-surface)" />
        <text id="semi1-p1" x="4" y="32">Player 1</text>
        <rect id="semi1-p2-rect" x="0" y="43" width="100" height="24" fill="var(--color-surface)" />
        <text id="semi1-p2" x="4" y="58">Player 2</text>

        <text x="0" y="119" font-weight="normal">SEMI 2</text>
        <rect id="semi2-p1-rect" x="0" y="123" width="100" height="24" fill="var(--color-surface)" />
        <text id="semi2-p1" x="4" y="138">Player 3</text>
        <rect id="semi2-p2-rect" x="0" y="149" width="100" height="24" fill="var(--color-surface)" />
        <text id="semi2-p2" x="4" y="164">Player 4</text>

        <text x="160" y="66" font-weight="normal">FINAL</text>
        <rect id="final-p1-rect" x="160" y="70" width="100" height="24" fill="var(--color-surface)" />
        <text id="final-p1" x="164" y="85">Player 1</text>
        <rect id="final-p2-rect" x="160" y="96" width="100" height="24" fill="var(--color-surface)" />
        <text id="final-p2" x="164" y="111">Player 4</text>

        <text x="160" y="172" font-weight="normal">THIRD</text>
        <rect id="third-p1-rect" x="160" y="176" width="100" height="24" fill="var(--color-surface)" />
        <text id="third-p1" x="164" y="191">Player 2</text>
        <rect id="third-p2-rect" x="160" y="202" width="100" height="24" fill="var(--color-surface)" />
        <text id="third-p2" x="164" y="217">Player 3</text>

        <path d="M100 42H129V148H100" fill="none" stroke="var(--color-surface)" stroke-width="2" />
        <line x1="160" y1="95" x2="130" y2="95" stroke="var(--color-surface)" stroke-width="2" />
      </svg>

      <!-- One or the other is shown based on if the tournament is over -->
      <p id="tournament-result-waiting" class="text-text-muted">Waiting for other matches to finish...</p>
      <button id="tournament-result-play-again-btn" class="button-tertiary text-2xl">PLAY AGAIN</button>
    </div>
  </div>

  <!-- Disconnected overlay -->
  <div id="disconnected-overlay" class="bg-background absolute inset-0 grid hidden place-items-center">
    <div class="animate-slide-up flex flex-col items-center justify-center gap-6">
      <p class="text-2xl font-bold">Disconnected</p>
      <p class="text-text-muted">Trying to reconnect...</p>
    </div>
  </div>

  <!-- Game container -->
  <div class="flex flex-1 flex-col items-center justify-center gap-6">
    <!-- Score -->
    <div class="flex justify-center gap-16 text-4xl font-bold">
      <span id="game-score-left" class="text-game-player1">0</span>
      <span class="text-text-muted">-</span>
      <span id="game-score-right" class="text-game-player2">0</span>
    </div>

    <!-- Canvas -->
    <canvas
      id="game-canvas"
      width="800"
      height="600"
      class="border-surface max-h-[55vh] max-w-full rounded-lg border-2"
    ></canvas>

    <!-- Player Names -->
    <div class="flex justify-center gap-16 text-2xl font-bold">
      <span id="game-left-player-name" class="text-game-player1">Player1</span>
      <span class="text-text-muted">vs</span>
      <span id="game-right-player-name" class="text-game-player2">Player2</span>
    </div>
  </div>
</div>
